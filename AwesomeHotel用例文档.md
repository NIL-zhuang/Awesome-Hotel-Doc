# 用例文档

## 更新历史

|           修改人员           |    日期    | 变更原因         |  版本号  |
| :--------------------------: | :--------: | :--------------- | :------: |
| 庄子元、程荣鑫、韩禧、郭礼华 | 2020.03.10 | 添加预订酒店用例 | 最初草稿 |
| 庄子元、程荣鑫、韩禧、郭礼华 | 2020.03.21 | 补全用例文档     | 草稿1.0 |
| 庄子元、程荣鑫、韩禧、郭礼华 | 2020.03.27 | 初步修订用例文档 | 草稿2.0  |
|庄子元、程荣鑫、韩禧、郭礼华 | 2020.03.28 | 进一步修订用例文档 | 草稿3.0  |

## 目录

[TOC]

## 1. 引言

### 1.1 目的

本文档描述了酒店房间预订系统的需求，包括住户、酒店管理人员、系统维护人员。旨在通过本文档更好的明确各个阶段的需求，推动开发工作的进行。

### 1.2 阅读说明

文档内用例的描述使用了《软件工程与计算（卷二） 软件开发的技术基础》附表一的模板，按照课程要求撰写完成。

本文档内的说明如下：

1. 系统: 指的是软件工程与计算Ⅱ课程中大作业要求设计的酒店房间预订系统
2. 用户: 指本网站的线上访问者，分为已登录（下或称”已被识别或授权“）的客户和未登录的访客两种，用例说明在涉及到用户且对这两种用户未作区分的情况下，即认为两种用户均适用该用例情况，在文档中用A表示。
3. 酒店工作人员：指酒店方面的管理员，在文档中用B表示。
4. 管理员：指由系统所有方指派或雇佣的对系统后台有部分或全部操作权限的人员，激活管理员权限需要登录对应的管理员账户（下或称“已被识别或授权”），在文档中用C表示。
5. 《软件工程与计算（卷二） 软件开发的技术基础》中已经定义的名称（如用例、顺序图、状态图）在本文档中完全沿用其定义
6. 密码合法，指密码长度在6-16位，包含大写英文、小写英文、数字、英文字符中的至少两种
7. 未被上述词条定义的词汇均符合《现代汉语词典（第六版）》的定义

### 1.3 参考文献

《软件工程与计算（卷二） 软件开发的技术基础》

## 2. 用例图

![用例图](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/01.用例图.jpg)

## 3. 用例列表

| 参与者 | 用例 |
| :----: | :--- |
|普通用户|用户个人基本信息管理|
|普通用户|浏览酒店详细信息|
|普通用户|预定酒店|
|普通用户|查看订单|
|酒店工作人员|酒店工作人员基本信息管理|
|酒店工作人员|维护酒店基本信息|
|酒店工作人员|录入可用客房|
|管理员|注册酒店工作人员账号|
|管理员|更改管理员密码|

## 4. 详细用例描述

### 4.1 用户个人基本信息管理

* 用例编号: AUR.1
* 名称: 用户个人基本信息管理
* 创建者： 郭礼华
* 创建日期：2020/03/21
* 最后一次更新者：郭礼华
* 更新日期：2020/03/27
* 参与者 ： 普通用户，目标是创建或修改自己的个人基本信息
* 触发条件：无
* 前置条件：无
* 后置条件：存储修改后的个人基本信息
* 优先级：高
* 正常流程：
  1. 用户开始修改个人基本信息
  2. 系统显示原有个人基本信息
  3. 用户选择修改个人基本信息，包括账户名、密码、姓名、手机号或邮箱
  4. 系统验证用户信息填写规范，询问用户是否确定修改
  5. 用户确认修改
  6. 系统存储修改后的个人基本信息
* 扩展流程：
  * 1a.若用户尚未拥有账号
    1. 系统进入注册模式
    2. 用户填写个人信息，包括账户名、密码、姓名、手机号、邮箱
    3. 返回正常流程4
  * 4a.用户填写的账户名与现有账户名重复
    1. 系统提示"账户名重复"，要求用户重新输入
  * 4b.用户输入的密码与确认密码不一致
    1. 系统提示"两次密码输入不一致"，要求用户重新输入
  * 4c.用户输入的手机号码不合规范
    1. 系统提示"手机号不正确"，要求用户重新输入
  * 4d.用户输入的邮箱不合规范
    1. 系统提示"邮箱输入不正确"，要求用户重新输入
  * 4e.用户密码不合法
    1. 系统提示密码不合法，要求用户重新输入
  * 5a.用户取消确认
    1. 系统返回信息填写页面让用户继续进行信息更改
  * 5b.用户是注册账号
    1. 系统询问用户是否登录账号<br>
       1.1 若是，则系统自动登录刚刚注册的账号<br>
       1.2 若否，则回到登录界面
* 特殊需求：
  1. 密码填写时要求密文输入
  2. 账户名中字符只能由中文、英文、数字及下划线组成，长度在3-10个字符之间
  3. 用户的信誉积分不可以被用户修改

### 4.2 浏览酒店详细信息

* 用例编号：AUR.2
* 名称：浏览酒店详细信息
* 创建日期：2020/03/21
* 最后一次更新者：庄子元
* 更新日期：2020/03/27
* 参与者：普通用户，目标是浏览酒店信息或查看某特定酒店信息
* 触发条件：用户打算查看酒店信息
* 前置条件：用户必须已经登录并授权
* 后置条件：无
* 优先级：中
* 正常流程
  1. 用户选择浏览酒店，设定预定时间
  2. 系统以列表形式展示目前有的酒店信息
  3. 用户选择查看某特定酒店的详细信息
  4. 系统跳转至酒店详情页面，展示酒店的详细信息，包括地址、简介、设施服务、房客类型、价格、优惠政策、当前时间段可用房间数量
* 扩展流程
  * 1a. 用户没有设定预定时间
    1. 系统默认为当前时间
  * 3a. 用户不查看酒店详情直接退出
    1. 系统回到主界面
* 特殊需求
  1. 在未来版本的推荐系统中存储用户的浏览记录，进行个性化推荐

### 4.3 预定酒店

* 用例编号: AUR.3
* 名称: 酒店预定
* 创建者： 庄子元
* 创建日期：2020/03/06
* 最后一次更新者：庄子元
* 更新日期：2020/03/10
* 参与者 ： 普通用户，目标是预定目标酒店的房间
* 触发条件：用户选好了打算预定的房间
* 前置条件：用户必须已经登录并授权
* 后置条件：存储订单内容；更新酒店房间状况和用户积分
* 优先级：高
* 正常流程：
  1. 用户选择预定酒店的房间类型
  2. 系统跳转至对应的信息填写页面
  3. 用户设置入住时间、退房时间、房间数量、预计入住的成人、儿童、婴幼儿的人数，是否需要早餐或叫床服务，以及填写备注
  4. 系统显示订单，内容包括订单号、订单时间、预定时间、退房时间、酒店名、酒店房间、下单用户姓名及账号、定单总价和用户备注；询问用户是否确认订单
  5. 用户确定预定该房间
  6. 系统要求用户输入密码
  7. 用户输入密码并确认
  8. 系统验证密码正确，给出订购凭证，记录销售记录、预定房间信息，并更新酒店房间状态
* 扩展流程：
  * 1a. 用户的信誉积分低于预定酒店的最低要求
    * 系统弹出提示，提醒用户当前信誉积分过低，无法预定酒店
  * 3*7a.用户要求取消订单
      1. 系统弹出“是否确认取消订单”的选择框
      2. 用户选择是或否<br>
         * 用户选择是，系统取消订单，退出当前页面<br>
         * 用户选择否，回到预定页面
  * 3b. 预计入住人数大于房间实际最多使用人数
    * 系统提示“入住人数大于房间实际最多使用人数”，要求用户重新输入
  * 3c. 成年人人数为0
    * 系统提示“儿童、婴幼儿至少要有一个成年人看护”，要求用户重新输入
  * 5b. 用户选择修改信息
    * 用户重新填写预定内容
  * 7b.用户5分钟内未输入密码
    * 系统提示“搁置时间过长”，关闭订单
  * 8a. 密码验证错误，错误次数少于5次
    * 系统提示密码错误，要求用户重新输入密码
  * 8b. 密码错误次数超过5次
    * 系统提示“密码错误次数超过限制”，关闭订单
* 特殊需求：无

### 4.4 查看订单

* 用例编号：AUR.4
* 名称：查看订单
* 创建日期：2020/03/21
* 最后一次更新者：庄子元
* 更新日期：2020/03/27
* 参与者：普通用户，目标是查看自己预定酒店的订单
* 触发条件：用户打算查看自己预定的正常订单
* 前置条件：用户必须已经登录并授权
* 后置条件：无
* 优先级：中
* 正常流程
  1. 用户进入个人订单页面
  2. 系统以列表形式展示个人的订单记录，显示包括预定时间、预定的酒店、房间，以及时间，是否入住等信息
  3. 用户查看订单详情
  4. 系统显示订单详情，内容包括订单号、订单时间、预定时间、退房时间、酒店名、酒店房间、下单用户姓名及账号、定单总价和用户备注
* 扩展流程
  * 2a. 用户尚未预定酒店
    1. 系统显示“您目前没有订单”
  * 3a. 用户不查看特定的订单，退出订单查看界面
    1. 系统回到主界面
  * 5.用户取消当前订单
     1. 系统询问是否确认取消订单
     2. 用户确认取消订单
     3. 系统删除用户订单，更新酒店房间状态，更新用户信誉积分
* 特殊需求
  1. 未入住酒店在订单列表的顶部展示

### 4.5 酒店工作人员基本信息管理

* 用例编号：BUR.1
* 名称：酒店工作人员基本信息管理
* 创建者：程荣鑫
* 创建日期：2020.03.21
* 最后一次更新者：程荣鑫
* 更新日期：2020.03.28
* 参与者：酒店工作人员，目的是维护酒店工作人员本人的基本信息
* 前置条件：
  1. 管理员已经给工作人员所属酒店注册酒店工作人员账户
  2. 酒店工作人员已经登录并被授权
* 触发条件：
  1. 酒店工作人员向系统申请填写或修改基本信息
* 后置条件：
  1. 系统存储修改后的酒店工作人员信息
* 
* 正常流程：
  1. 酒店工作人员开始修改个人基本信息
  2. 系统显示原有个人基本信息
  3. 酒店工作人员选择修改个人基本信息，包括姓名、手机号或邮箱
  4. 系统验证酒店工作人员信息填写规范，询问酒店工作人员是否确定修改
  5. 酒店工作人员确认修改
  6. 系统存储修改后的个人基本信息
* 扩展流程：
  * 4a.酒店工作人员输入的手机号码不合规范
    1. 系统提示"手机号不正确"，要求酒店工作人员重新输入
  * 4b.酒店工作人员输入的邮箱不合规范
    1. 系统提示"邮箱输入不正确"，要求酒店工作人员重新输入
  * 5a.酒店工作人员取消确认
    1. 系统返回信息填写页面让酒店工作人员继续进行信息更改
* 特殊需求：
  * SR1. 酒店工作人员账户由系统管理员注册，账户由酒店自行保管
  * SR2. 每个酒店工作人员有一个唯一且不可修改的工号

### 4.6 维护酒店基本信息

* 用例编号：BUR.2
* 名称：维护酒店基本信息
* 创建者：程荣鑫
* 创建日期：2020.03.21
* 最后一次更新者：程荣鑫
* 更新日期：2020.03.28
* 参与者 ：酒店工作人员，目的是填写酒店信息
* 触发条件：
  1. 酒店工作人员向系统申请填写或修改酒店基本信息
* 前置条件：
  1. 酒店工作人员账户已经登录并被授权
* 后置条件：
  1. 系统保存更新后的酒店基本信息
* 优先级：高
* 正常流程：
  1. 酒店工作人员添加酒店，开始填写酒店基本信息
  2. 系统跳转至酒店信息填写页面，并显示已填写的信息(如果有)
  3. 酒店工作人员选择填写酒店信息，包括酒店名称、地址、商圈、简介、设施服务、星级等，并提交
  4. 系统询问是否确认
  5. 用户确认提交
  6. 系统提示提交成功
* 扩展流程：
  * 1-3a. 若酒店工作人员申请放弃添加酒店，系统不保存已填写的信息（如果有），退出信息填写页面
  * 5a. 用户取消确认，选择继续填写
    1. 系统回到正常流程3
* 特殊需求：
  * SR1. 酒店方应对填写的酒店信息负责

### 4.7 录入可用客房

* 用例编号：BUR.3
* 名称：录入可用客房
* 创建者：程荣鑫
* 创建日期：2020.03.21
* 最后一次更新者：程荣鑫
* 更新日期：2020.03.28
* 参与者 ：酒店工作人员，目的是快速录入酒店客房信息
* 触发条件：无
* 前置条件：
  1. 酒店工作人员账户已经登录并被授权
* 后置条件：
  1. 系统保存更新后的酒店客房信息
* 优先级：高
* 正常流程：
  1. 酒店工作人员向系统申请设置酒店客房信息
  2. 系统跳转至酒店客房信息填写页面
  3. 酒店工作人员填写或修改具体的酒店客房信息包括类型、数量、原始价格以及房间照片（可选）等，并提交
  4. 系统询问酒店工作人员是否确认录入该客房信息
  5. 用户确认录入客房
  6. 系统保存并更新客房信息
* 扩展流程：
  * 1-3a. 若酒店工作人员申请放弃填写酒店客房信息，系统不保存已填写的信息（如果有），退出客房信息填写页面
  * 3b. 若酒店工作人员填写的类型与当前已有类型重复，提示酒店工作人员不要重复添加房间类型，返回3
  * 5a. 用户取消录入客房
    1. 系统回到正常流程3
* 特殊需求：
  * SR1. 酒店方应对填写的酒店信息负责

### 4.8 注册酒店工作人员账号

* 用例编号：CUR.1
* 名称：注册酒店⼯作⼈员账号
* 创建者：韩禧
* 创建日期：2020/03/21
* 最后一次更新者：韩禧
* 更新日期：2020/03/27
* 参与者 ：管理员，目标是为酒店工作人员进行账号注册
* 触发条件：
  1. 管理员打开账号管理页面
* 前置条件：
  1. 管理员处于登陆状态
* 后置条件：
  1. 更新酒店工作人员账号名单和数据
* 优先级：高
* 正常流程：
  1. 管理员进入酒店工作人员注册界面
  2. 管理员填写酒店工作人员的信息，包括账号、姓名、手机号、邮箱、工作的酒店名、工号，并进行注册
  3. 系统检查酒店工作人员的信息，显示注册成功，并显示账号和初始密码
* 扩展流程：
  * 2a.酒店工作人员的信息不全
    1. 系统要求补全信息，回到2
  * 3a.密码不合法
    1. 系统提示重新输入密码，回到2
* 特殊需求：
  1. 对于2中填写的信息进行密文存储
  2. 管理员不能对信用值进行修改
  3. 酒店工作人员的账号是酒店英文名称+工作人员工号

### 4.9 更改管理员密码

* 用例编号：CUR.2
* 名称：更改管理员密码
* 创建者：韩禧
* 创建日期：2020/03/22
* 最后一次更新者：韩禧
* 更新日期：2020/03/27
* 参与者 ：管理员，目标是更改管理员密码
* 触发条件：
  1. 管理员打开修改密码页面
* 前置条件：
  1. 管理员已登陆并被授权
* 后置条件：
  1. 系统存储更改后的管理员密码
* 优先级：高
* 正常流程：
  1. 管理员提交修改密码请求
  2. 系统进入修改密码页面
  3. 管理员依次输入旧密码、新密码、确认新密码后提交
  4. 系统返回修改成果的提示
* 扩展流程：
  * 3a.旧密码验证错误
    4. 系统提示密码错误，要求重新输入
  * 3b.新旧密码相同
    4. 系统提示新旧密码不能相同，要求重新输入
  * 3c. 新密码和确认新密码不同
    4. 系统提示"两次密码输入不一致"，要求管理员重新输入
* 特殊需求：
  * 对系统中的密码信息、请求发送时传输的密码信息进行加密

### 4.10 查询目标酒店

* 用例编号：AUR.5
* 名称：查询目标酒店
* 创建者：韩禧
* 创建日期：2020/04/29
* 最后一次更新者：韩禧
* 更新日期：2020/04/29
* 参与者 ：用户，目标是搜索需要的酒店
* 触发条件：
  1. 用户打开搜索页面
* 前置条件：
  1. 用户已登陆
* 后置条件：
  1. 系统对搜索内容进行处理并返回需要的结果
* 优先级：中
* 正常流程：
  1. 用户填写搜索表单
  2. 用户提交搜索表单
  3. 系统返回搜索结果
* 扩展流程：
  * 1a.表单没有符合要求的选项
    - 2.填写用户反馈给系统管理员
  * 2a.提交搜索表单后反馈填写错误
    - 3.根据反馈信息修改表单
    - 4.重新提交表单
  * 3a.搜索结果没有满意的内容，或无符合表单要求的酒店
    - 4.改变搜索条件，重新填写表单，或停止搜索
* 特殊需求：
  * 对表单中的多个信息进行计算、评分，将符合需要的酒店按得分高低依次排列

### 4.11 取消订单

* 用例编号：AUR.6
* 名称：取消订单
* 创建者：韩禧
* 创建日期：2020/04/30
* 最后一次更新者：韩禧
* 更新日期：2020/04/30
* 参与者 ：用户，目标是将不再需要的酒店取消
* 触发条件：
  1. 用户订单页面
* 前置条件：
  1. 用户已登陆
  2. 用户有未完成的订单
* 后置条件：
  1. 系统对取消订单进行记录及相关操作
* 优先级：中
* 正常流程：
  1. 用户找到需要取消的订单
  2. 用户点击“取消订单”按钮
  3. 用户点击“确定”按钮
  4. 系统将订单取消
  5. 系统返回取消结果
* 扩展流程：
  * 3a.用户放弃取消订单
    - 4.用户点击“取消”，停止修改
  * 2a.提交搜索表单后反馈填写错误
    - 3.根据反馈信息修改表单
    - 4.重新提交表单
  * 3a.搜索结果没有满意的内容，或无符合表单要求的酒店
    - 4.改变搜索条件，重新填写表单，或停止搜索
* 特殊需求：
  * 不可取消的订单不会出现“取消订单”按钮，防止用户错误操作
  * 



## 5. 需求分析模型

### 5.1 系统顺序图

#### 5.1.1 用户个人基本信息管理

![用户修改个人信息](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/用户修改个人信息-系统顺序图.png)

#### 5.1.2 浏览酒店详细信息

![浏览详细信息](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/浏览酒店详细信息-交互.jpg)

#### 5.1.3 预订酒店

![预定房间](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/01.系统顺序图.jpg)

#### 5.1.4 查看订单

![查看订单](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/查看订单流程.jpg)

#### 5.1.5 酒店工作人员基本信息管理

![酒店修改个人信息](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/酒店工作人员修改个人信息-系统顺序图.png)

#### 5.1.6 维护酒店基本信息

![酒店信息](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/工作人员酒店信息顺序图.jpg)

#### 5.1.7 录入可用客房

![录入客房](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/工作人员录入客房顺序图.jpg)

#### 5.1.8 注册酒店工作人员账号

![注册工作人员账号](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/管理员注册.png)

#### 5.1.9 更改管理员密码

![更改密码](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/管理员修改密码.png)

### 5.2 概念类图

![概念类图](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/概念类图.jpg)

### 5.3 状态图

#### 5.3.1 用户个人基本信息管理

![用户修改个人信息](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/用户修改个人信息-状态图.png)

#### 5.3.2 浏览酒店详细信息

![浏览酒店详细信息](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/浏览酒店详细信息-流程.jpg)

#### 5.3.3 预订酒店

![预订酒店](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/预定酒店-状态图.png)

#### 5.3.4 查看订单

![查看订单](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/查看订单-流程.jpg)

#### 5.3.5 酒店工作人员基本信息管理

![酒店修改个人信息](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/酒店工作人员修改个人信息-状态图.png)

#### 5.3.6 维护酒店基本信息

![酒店信息](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/工作人员酒店信息状态.jpg)

#### 5.3.7 录入可用客房

![录入客房](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/工作人员录入客房状态.jpg)

#### 5.3.8 注册酒店工作人员账号

![注册账号](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/注册状态图.png)

#### 5.3.9 更改管理员密码

![更改密码](https://lemonzzy.oss-cn-hangzhou.aliyuncs.com/img/修改密码状态图.png)
